<div class="main-open-new-account">
  <mat-toolbar>
    <span>MockBank</span>
    <span class="example-spacer"></span>
    <div class="button-align">
      <button mat-button [matMenuTriggerFor]="contact" class="contact-btn">
        Help & Contact
      </button>
      <mat-menu #contact="matMenu">
        <ul mat-menu class="contact-popup">
          <div class="collapse">
            <li class="">
              <h6 class="contact-headline m-0">
                Phone (Mo. - Fr. 08:00 - 20:00 Uhr)
              </h6>
              <a href="tel:+4969242469000">176 52968778</a>
            </li>

            <li class="">
              <h6 class="contact-headline mb-0 mt-3">E-Mail</h6>
              <a href="mailto:kundenservice@c24.de">customerserviceMB.de</a>
            </li>

            <li class="">
              <h6 class="contact-headline mb-0 mt-3">Q&A</h6>
              <a target="_blank" href="">To Help Center</a>
            </li>
          </div>
        </ul>
      </mat-menu>
    </div>
  </mat-toolbar>
  <!-- <div class="new-account-form"> -->
  <!-- <button mat-raised-button (click)="isLinear = !isLinear" id="toggle-linear">
      {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
    </button> -->
  <div class="align-form">
    <mat-stepper [linear]="isLinear" #stepper>
      <mat-step
        class="mat-step1"
        [stepControl]="firstFormGroup"
        errorMessage="Contact Information's are required."
      >
        <form class="form-1" [formGroup]="firstFormGroup">
          <ng-template matStepLabel>Contact Information</ng-template>

          <mat-form-field>
            <mat-label>Country Code</mat-label>
            <input
              matInput
              type="text"
              placeholder="+49"
              formControlName="countryCode"
            />
            @if(firstFormGroup.get('countryCode')?.hasError('pattern')){

            <mat-error> Enter a valid country code (e.g., +49). </mat-error>
            }
          </mat-form-field>

          <mat-form-field>
            <mat-label>Phone Number</mat-label>
            <input
              matInput
              type="tel"
              placeholder="Phone Number"
              formControlName="phoneNumber"
              placeholder="17652968778"
            />
            @if(firstFormGroup.get('phoneNumber')?.hasError('pattern')){
            <mat-error> Enter a valid phone number (10-15 digits). </mat-error>
            }
          </mat-form-field>

          <mat-form-field>
            <mat-label>Email Address</mat-label>
            <input
              matInput
              type="email"
              placeholder="mail@sebastian-rothe.com"
              formControlName="email"
            />
            @if(firstFormGroup.get('email')?.hasError('email')){
            <mat-error> Enter a valid email address. </mat-error>
            }
          </mat-form-field>

          <div>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>

      <mat-step
        [stepControl]="secondFormGroup"
        errorMessage="Address Details are required."
      >
        <form class="form-2" [formGroup]="secondFormGroup">
          <ng-template matStepLabel>Address Details</ng-template>

          <mat-form-field>
            <mat-label>First Name</mat-label>
            <input
              matInput
              type="text"
              formControlName="firstName"
              placeholder="Sebastian"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Last Name</mat-label>
            <input
              matInput
              type="text"
              formControlName="lastName"
              placeholder="Rothe"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Date of Birth</mat-label>
            <input
              formControlName="birthDate"
              matInput
              [matDatepicker]="picker"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Street Address</mat-label>
            <input
              matInput
              type="text"
              formControlName="streetAddress"
              placeholder="Mühlwehrstr. 8"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Zip Code</mat-label>
            <input
              matInput
              type="number"
              formControlName="zipCode"
              placeholder="60488"
            />
            @if(secondFormGroup.get('zipCode')?.hasError('zipCode')){
            <mat-error> Enter a valid Zip Code. </mat-error>
            }
          </mat-form-field>

          <mat-form-field>
            <mat-label>City</mat-label>
            <input
              matInput
              type="text"
              formControlName="city"
              placeholder="Frankfurt am Main"
            />
          </mat-form-field>

          <div class="align-next-btn">
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>

      <mat-step
        [stepControl]="thirdFormGroup"
        errorMessage="Additional Information's are required."
      >
        <form class="form-3" [formGroup]="thirdFormGroup">
          <ng-template matStepLabel>Additional Information</ng-template>

          <mat-form-field>
            <mat-label>Occupation</mat-label>
            <input
              matInput
              type="text"
              formControlName="occupation"
              placeholder="Software Developer"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Nationality</mat-label>
            <input
              matInput
              type="text"
              formControlName="nationality"
              placeholder="German"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Tax ID</mat-label>
            <input
              class="text-d-none"
              matInput
              type="number"
              formControlName="taxId"
              placeholder="12345678901"
            />
          </mat-form-field>

          <div class="align-next-btn">
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
            <!-- [disabled]="
            !firstFormGroup.valid &&
            !secondFormGroup.valid &&
            !thirdFormGroup.valid
          " wäre eignetlich etwas weiter oben! -->
          </div>
        </form>
      </mat-step>
      <mat-step
        [stepControl]="fourthFormGroup"
        errorMessage="Password is required."
      >
        <form class="form-4" [formGroup]="fourthFormGroup">
          <ng-template matStepLabel>Set Password</ng-template>

          <mat-form-field>
            <mat-label>Password</mat-label>
            <input
              matInput
              type="password"
              formControlName="password"
              placeholder="Enter your password"
            />
            @if(fourthFormGroup.get('password')?.hasError('required')){
            <mat-error> Password is required. </mat-error>}
            @if((fourthFormGroup.get('password')?.hasError('pattern'))){
            <mat-error>
              Password must be at least 8 characters and include a number, a
              special character, and a capital letter. </mat-error
            >}
          </mat-form-field>

          <mat-form-field>
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              type="password"
              formControlName="confirmPassword"
              placeholder="Confirm your password"
            />
            @if(
            fourthFormGroup.get('confirmPassword')?.hasError('required')){<mat-error>
              Confirmation is required. </mat-error
            >} @if(passwordMismatch){
            <mat-error> Passwords do not match. </mat-error>}
          </mat-form-field>

          <div class="align-next-btn">
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>

      <mat-step [editable]="false">
        <ng-template matStepLabel>Done</ng-template>
        <div class="form-done">
          <div class="summary">
            <h3>Summary of Your Information</h3>
            <p><strong>Contact Information:</strong></p>
            <p>Country Code: {{ firstFormGroup.get('countryCode')?.value }}</p>
            <p>Phone Number: {{ firstFormGroup.get('phoneNumber')?.value }}</p>
            <p>Email: {{ firstFormGroup.get('email')?.value }}</p>
            <p><strong>Address Details:</strong></p>
            <p>First Name: {{ secondFormGroup.get('firstName')?.value }}</p>
            <p>Last Name: {{ secondFormGroup.get('lastName')?.value }}</p>
            <p>City: {{ secondFormGroup.get('city')?.value }}</p>
            <p><strong>Additional Information:</strong></p>
            <p>Occupation: {{ thirdFormGroup.get('occupation')?.value }}</p>
            <p>Nationality: {{ thirdFormGroup.get('nationality')?.value }}</p>
          </div>
          <div class="action-buttons">
            <button mat-button (click)="stepper.selectedIndex = 0">Edit Data</button>
            <button mat-raised-button color="primary" (click)="downloadPdf()">Download as PDF</button>
        
          </div>
          <div class="align-next-btn">
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button (click)="saveNewUser()">Send application</button>
          </div>
       
        </div>
      </mat-step>
    </mat-stepper>
  </div>

  <!-- </div> -->
</div>
